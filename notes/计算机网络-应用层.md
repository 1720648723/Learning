# 六、应用层

* **功能**：文件传输、电子邮件服务

* **协议（都是基于 TCP 的）**：DNS、FTP、HTTP、电子邮件传输协议：SMTP、POP3、
  基于 UDP 的有 TFTP、SNMP 、DHCP、RIP 与 DNS
  其中 DNS 既可以基于 TCP，也可以基于 UDP

  ****

  **常见的端口号**
  
  | DNS  |  FTP   | HTTP | SMTP | POP3 |
  | :--: | :----: | :--: | :--: | :--: |
  |  53  | 20，21 |  80  |  25  | 110  |
  
  登记端口号：1024 - 49151，为没有熟知端口号的应用程序使用。
  
  客户端端口或短暂端口：49152 - 65535，为客户进程运行时动态选择。
  
  
  
  ****
  
* **问：DNS（Domain Name System 域名解析系统）？**

* **答**：如果不允许你要 www.baiwu.com 来访问百度的首页，你要咋办。准备写你可以通过 IP 地址访问的，在网上搜了一下，本地可以 ping www.baidu.com 发现有好几个 IP 地址，这也好理解，大公司为了分担服务器压力，可以给一个域名分配好几个 IP 地址，然后使用循环分配使用或者其他方式，降低服务器压力，这也才不会让你感觉卡卡的嘛。题外话，DNS 就是可以根据你给的英文网址，查找对应的 IP 地址，你的浏览器再根据 IP 地址查找目的服务器，如果直接用 IP 地址是不是更快，是的。
  
  ****
  
* **问：FTP（File Transfer Protocol 文件传输协议）？**

* **答**：文件传输协议，是因特网上使用最广泛的传送协议。使用 TCP 连接，端口号 21。在传输文件时需建立 2 个 TCP 连接，一个叫 控制连接 用于进行命令控制 20 号端口，一个叫 数据连接 进行真正的数据传送 21 号端口。
  
  ****
  
* **问：介绍 HTTP （Hyper Text Transport Protocol 超文本传输协议）协议的传输过程？**

* **答**：1. HTTP 是面向连接的应用层协议，它使用TCP连接进行可靠传输，服务器默认监听在 80  端口；
2. 网络应用模型：客户[Client]/服务器[Server]模型，C/S模型，

3. 服务流程：从协议执行过程来说，当浏览器要访问www服务器时，首先要对服务器进行域名解析（DNS 协议）。一旦获得IP 地址【网络层的路由选择与转发,找到目的 IP 地址】，浏览器要通过 TCP 三次握手和服务器建立连接。每个服务器都有一个服务进程，它不断监听 TCP 端口号 80，当监听到浏览器请求后便和浏览器建立连接。TCP 连接建立后，浏览器就向服务器发送某个 HTTP 请求。如 localhost/test/index.jsp 。服务器收到请求后，将构建的服务页面返回给浏览器，浏览器对信息进行解释后，显示给客户。

4. HTTP 状态码中 500 表示服务器发生错误。

5. **练习**：A，B 两台机器都正常工作，B 机器未监听任何端口。如果 A 机器向 B 机器 80 端口发送 SYN 包,会收到何种类型的回包？

   **答**：因为 B 机器未监听任何端口，A 又向  B 的 80 端口发送了数据包，所以 B 不会建立连接,会异常结束建立连接，会发送 RST 包，如果是正常结束的话就会发送 FIN 包， RST 是 TCP 连接中 出现差错产生的，RST 置 1可以用来拒绝一个非法的报文段或拒绝打开一个连接。**RST 是 TCP 报文段首部里的字段，还有其他一些很容易忘的字段。**
****
* **问：HTTPS（S Security） 和 HTTP 的区别主要？**
* **答**：HTTPS 已被广泛地用于 Web 浏览器与服务器之间的身份认证和加密数据传输。
  1、HTTPS 协议需要到 CA 申请证书，一般免费证书较少，因而需要一定费用。
  2、HTTP 是超文本传输协议，信息是明文传输，HTTPS 则是具有安全性的 SSL 加密传输协议。
  3、HTTP 和 HTTPS 端口不同，前者是 80，后者是 443。
  4、HTTP 的连接很简单，是无状态的；HTTPS 协议是由 SSL+HTTP 协议构建的可进行加密传输、身份认证的网络协议，比 HTTP 协议安全。
****
### 电子邮件使用的协议
* **问：电子邮件收发过程？**
* **答**：首先 发信人使用代理来编辑邮件，用户代理使用 SMTP 将邮件发送给邮件服务器缓存队列中等待发送，邮件服务器发现有邮件，便与接收端服务器使用 SMTP 协议进行 TCP 连接，发送完后便断开连接。接收端服务器接受到邮件后放入收信人用户邮箱中。收信人收信时使用 POP3 将自己的邮件从接收端服务器中取出。因此可以简单记忆为发送邮件使用 SMTP，而接受邮件需要使用 POP3。
  
  ****
* **问：SMTP（Simple Message Transfer Protocol 简单邮件传输协议）？**
* **答**：简单邮件传送协议，使用 25 号端口。
  
  ****
* **问：POP3（Post Office Protocol 3 邮局通讯协议第三版）？**
* **答**：邮局协议版本 3，一个邮件读取协议。
  
  ****
* **问：Outlook 等常用的电子邮件软件使用 SMTP 协议进行邮件的收发？**
* **答**：错误！使用 SMTP 来发送邮件，使用 POP3 来接受邮件。
  
  ****
* **问：GET和POST的区别？**
* **答**：参考：[博客](https://www.cnblogs.com/logsharing/p/8448446.html)
1-GET请求只能进行url编码，而POST支持多种编码方式。
2-GET请求参数会被完整保留在浏览器历史记录里，而POST中的参数不会被保留。
3-GET参数通过URL传递，POST放在Request body中，因此GET比POST更不安全，因为参数直接暴露在URL上，所以不能用来传递敏感信息。
参考：GET 和 POST 是什么？HTTP 协议中的两种发送请求的方法。HTTP 是什么？HTTP 是基于 TCP/IP 的关于数据如何在万维网中如何通信的协议。HTTP 的底层是 TCP/IP。所以 GET 和 POST 的底层也是 TCP/IP，也就是说，GET/POST 都是 TCP 链接。GET 和 POST 能做的事情是一样一样的。你要给 GET 加上 request body，给 POST 带上 url 参数，技术上是完全行的通的。
  
  ****
* **问：同源策略是浏览器的安全基石，但互联网业务往往需要实现跨域通信，以下哪一种方案可以实现跨域？**

* **答**：同源策略（Same Origin Policy，SOP）需要同时满足以下三点要求： 
  1）协议相同  2）域名相同 3）端口相同 
   http:www.test.com与https:www.test.com 不同源——协议不同 
   http:www.test.com与http:www.admin.com 不同源——域名不同 
   http:www.test.com与http:www.test.com:8081 不同源——端口不同
   只要不满足其中任意一个要求，就不符合同源策略，就会出现“跨域。
  不同源的客户端脚本（js，actionscript）在没有明确的授权的情况下不能读取对方的资源。
  以下三种可实现跨域：
  跨源资源（CrossOrigin Resources Sharing，CORS ）是一种允许多种资源在一个 web 页面请求域之外的另一个域的资源的协议，是为了让AJAX能够跨域而生的。
  内容安全策略（Content Security Policy，CSP）是一种白名单机制，限制网站中是否可以包含某来源的内容。
  Oauth是一个关于授权的开放网络标准，相当于在客户端与服务器之间添加了一个授权层。
  
  ****
* **问：简述cookie和session的区别？**
* **答**：1，session 在服务器端，cookie 在客户端（浏览器）
  2、session 的运行依赖 session id，而 session id 是存在 cookie 中的，也就是说，如果浏览器禁用了 cookie ，同时 session 也会失效，存储Session时，键与Cookie中的sessionid相同，值是开发人员设置的键值对信息，进行了base64编码，过期时间由开发人员设置
  3、cookie安全性比session差
  
  ****
* **问题？**
  **UDP不是面向连接的，所以源IP地址通常可以伪造的？
  TCP SYN数据包中的源IP地址通常是可以伪造的？
  TCP是面向连接的，三次握手后，源IP不一定是真实的？
  禁止PING就是禁止ICMP协议？**


